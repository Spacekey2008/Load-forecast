---

- step:
    name: train-model-1
    image: valohai/keras:2.1.3-tensorflow1.4.0-python3.5-cuda8.0-cudnn6-devel-ubuntu14.04
    command:
      - python train_model_1.py {parameters}
    parameters:
      - name: epochs
        type: integer
        default: 50
      - name: batch_size
        type: integer
        default: 1024
      - name: validation_split
        type: float
        default: 0.2
    inputs:
      - name: dataset
        default: https://s3-eu-west-1.amazonaws.com/valohai-examples/load-forecasting/rte-dataset.csv

- step:
    name: train-model-2
    image: valohai/keras:2.1.3-tensorflow1.4.0-python3.5-cuda8.0-cudnn6-devel-ubuntu14.04
    command: python train_model_2.py
    
- step:
    name: execute-model-1
    image: valohai/keras:2.1.3-tensorflow1.4.0-python3.5-cuda8.0-cudnn6-devel-ubuntu14.04
    command: python execute_model_1.py
    
- step:
    name: execute-model-2
    image: valohai/keras:2.1.3-tensorflow1.4.0-python3.5-cuda8.0-cudnn6-devel-ubuntu14.04
    command: python execute_model_2.py
